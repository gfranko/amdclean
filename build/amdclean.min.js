/*! amdclean - v2.7.0 - 2022-04-11
* Modified work: https://github.com/6si/amdclean
* Original work: https://github.com/gfranko/amdclean
* Original Copyright (c) 2022 Greg Franko */


/*The MIT License (MIT)

Copyright (c) 2014 Greg Franko

Permission is hereby granted, free of charge, to any person obtaining a copy of
this software and associated documentation files (the "Software"), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
the Software, and to permit persons to whom the Software is furnished to do so,
subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

*/
!function(esprima,estraverse,escodegen,_,sourcemapToAst){var defaultOptions,errorMsgs,defaultValues,utils,convertToIIFE,convertToIIFEDeclaration,normalizeModuleName,convertToFunctionExpression,convertToObjectDeclaration,createAst,convertDefinesAndRequires,traverseAndUpdateAst,getNormalizedModuleName,findAndStoreAllModuleIds,generateCode,clean,defaultOptions={code:"",sourceMap:null,filePath:"",globalModules:[],esprima:{comment:!0,loc:!0,range:!0,tokens:!0},escodegen:{comment:!0,format:{indent:{style:"  ",adjustMultilineComment:!0}}},commentCleanName:"amdclean",ignoreModules:[],removeModules:[],removeAllRequires:!1,removeUseStricts:!0,transformAMDChecks:!0,createAnonymousAMDModule:!1,shimOverrides:{},prefixMode:"standard",prefixTransform:function(e,t){return e},wrap:{start:";(function() {\n",end:"\n}());"},aggressiveOptimizations:!1,config:{}},errorMsgs={emptyCode:"There is no code to generate the AST with",emptyAst:function(e){return"An AST is not being passed to the "+e+"() method"},invalidObject:function(e){return"An object is not being passed as the first parameter to the "+e+"() method"},lodash:"Make sure you have included lodash (https://github.com/lodash/lodash).",esprima:"Make sure you have included esprima (https://github.com/ariya/esprima).",estraverse:"Make sure you have included estraverse (https://github.com/Constellation/estraverse).",escodegen:"Make sure you have included escodegen (https://github.com/Constellation/escodegen).",sourcemapToAst:"Make sure you have included sourcemapToAst (https://github.com/tarruda/sourcemap-to-ast)."},defaultValues={dependencyBlacklist:{require:"remove",exports:!0,module:"remove"},defaultLOC:{start:{line:0,column:0}},defaultRange:[0,0]},utils=function(){var Utils={isDefine:function(e){var t=e.expression||{},n=t.callee;return _.isObject(e)&&"ExpressionStatement"===e.type&&t&&"CallExpression"===t.type&&"Identifier"===n.type&&"define"===n.name},isRequire:function(e){var t=e.expression||{},n=t.callee;return e&&"ExpressionStatement"===e.type&&t&&"CallExpression"===t.type&&"Identifier"===n.type&&"require"===n.name},isModuleExports:function(e){return!!e&&("AssignmentExpression"===e.type&&e.left&&"MemberExpression"===e.left.type&&e.left.object&&"Identifier"===e.left.object.type&&"module"===e.left.object.name&&e.left.property&&"Identifier"===e.left.property.type&&"exports"===e.left.property.name)},isRequireExpression:function(e){return e&&"CallExpression"===e.type&&e.callee&&"require"===e.callee.name},isObjectExpression:function(e){return e&&"ObjectExpression"===e.type},isFunctionExpression:function(e){return e&&"FunctionExpression"===e.type},isFunctionCallExpression:function(e){return e&&"CallExpression"===e.type&&e.callee&&"FunctionExpression"===e.callee.type},isUseStrict:function(e){return e&&"use strict"===e.value&&"Literal"===e.type},isIfStatement:function(e){return e&&"IfStatement"===e.type&&e.test},isAMDConditional:function(e){if(!Utils.isIfStatement(e))return!1;var t={left:{operator:"typeof",argument:{type:"Identifier",name:"define"}},right:{type:"Literal",value:"function"}},n={left:t.right,right:t.left};try{return _.find(e.test,t)||_.find([e.test],t)||_.find(e.test,n)||_.find([e.test],n)||_.find(e.test.left||{},t)||_.find([e.test.left||{}],t)||_.find(e.test.left||{},n)||_.find([e.test.left||{}],n)}catch(e){return!1}},returnExpressionIdentifier:function(e){return{type:"ExpressionStatement",expression:{type:"Identifier",name:e,range:defaultValues.defaultRange,loc:defaultValues.defaultLOC},range:defaultValues.defaultRange,loc:defaultValues.defaultLOC}},readFile:function(e){return"undefined"!=typeof exports?require("fs").readFileSync(e,"utf8"):""},isRelativeFilePath:function(e){e=e.split("/");return-1!==e.length&&("."===e[0]||".."===e[0])},convertToCamelCase:function(e,t){return t=t||"_",e.replace(new RegExp(t+"(.)","g"),function(e,t){return t.toUpperCase()})},prefixReservedWords:function(name){var reservedWord=!1;try{name.length&&eval("var "+name+" = 1;")}catch(e){reservedWord=!0}return!0===reservedWord?"_"+name:name},normalizeDependencyName:function(e,t){if(!e||!t)return t;var n=function(){if(!t||-1===t.indexOf("!"))return"";var e=t.split("!");return t=e[1],e[0]+"!"}();return Utils.isRelativeFilePath(t)?n+function(e){e=e.split("/");return _.reduce(e,function(e,t){switch(t){case".":break;case"..":e.pop();break;default:e.push(t)}return e},[]).join("/")}([function(e){e=e.split("/");return e.pop(),e.join("/")}(e),t].join("/")):n+t}};return Utils}(),convertToIIFE=function(e){var t=e.callbackFuncParams,n=e.callbackFunc,r=e.dependencyNames,e=e.node,a=e.range||defaultValues.defaultRange,e=e.loc||defaultValues.defaultLOC;return{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"FunctionExpression",id:null,params:t,defaults:[],body:n.body,rest:n.rest,generator:n.generator,expression:n.expression,range:a,loc:e},arguments:r,range:a,loc:e},range:a,loc:e}},convertToIIFEDeclaration=function(r){var a=this.options,o=r.moduleId,e=r.moduleName,s=r.hasModuleParam,i=r.hasExportsParam,t=r.callbackFuncParams,n=r.isOptimized,l=r.callbackFunc,u=r.node,c=l.name,l=l.type,p=u.range||defaultValues.defaultRange,d=u.loc||defaultValues.defaultLOC,l=(u=r.callbackFunc,u="Identifier"===l&&"undefined"!==c?{type:"FunctionExpression",id:null,params:[],defaults:[],body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:{type:"ConditionalExpression",test:{type:"BinaryExpression",operator:"===",left:{type:"UnaryExpression",operator:"typeof",argument:{type:"Identifier",name:c,range:p,loc:d},prefix:!0,range:p,loc:d},right:{type:"Literal",value:"function",raw:"'function'",range:p,loc:d},range:p,loc:d},consequent:{type:"CallExpression",callee:{type:"Identifier",name:c,range:p,loc:d},arguments:t,range:p,loc:d},alternate:{type:"Identifier",name:c,range:p,loc:d},range:p,loc:d},range:p,loc:d}],range:p,loc:d},rest:null,generator:!1,expression:!1,range:p,loc:d}:u),c=function(){var e=r.dependencyNames,t={type:"ObjectExpression",properties:[],range:p,loc:d},n={type:"MemberExpression",computed:!0,object:{type:"Identifier",name:"modules"},property:{type:"Literal",value:o}};if(a.config&&a.config[o]){if(i&&s)return[t,t,n];s&&(e[_.findIndex(e,function(e){return"{}"===e.name})]=n)}return e}(),u="Literal"===l.type||"Identifier"===l.type&&"undefined"===l.name||!0===n?l:{type:"CallExpression",callee:{type:"FunctionExpression",id:{type:"Identifier",name:"",range:p,loc:d},params:t,defaults:[],body:l.body,rest:l.rest,generator:l.generator,expression:l.expression,range:p,loc:d},arguments:c,range:p,loc:d},n={type:"ExpressionStatement",expression:{type:"AssignmentExpression",operator:"=",left:{type:"Identifier",name:a.IIFEVariableNameTransform?a.IIFEVariableNameTransform(e,o):e,range:p,loc:d},right:u,range:p,loc:d},range:p,loc:d};return estraverse.replace(l,{enter:function(e){return utils.isModuleExports(e)?{type:"AssignmentExpression",operator:"=",left:{type:"Identifier",name:"exports"},right:e.right}:e}}),n},normalizeModuleName=function(e,t){var n=this.options,r=n.prefixMode,n=n.prefixTransform,a=defaultValues.dependencyBlacklist;return"{}"===(e=e||"")?"remove"===a[e]?"":e:(a=utils.prefixReservedWords(e.replace(/\./g,"").replace(/[^A-Za-z0-9_$]/g,"_").replace(/^_+/,"")),r="camelCase"===r?utils.convertToCamelCase(a):a,_.isFunction(n)&&(a=n(r,e),_.isString(a)&&a.length)?a:r)},convertToFunctionExpression=function(o){function r(t){var n;return n=!1,C[t="_"+t+"_"]?n=!0:estraverse.traverse(w,{enter:function(e){"VariableDeclarator"===e.type&&e.id&&"Identifier"===e.id.type&&e.id.name===t&&(n=!0)}}),n?r(t):t}var i,e,t,a,n,s,l=this,u=l.options,c=u.ignoreModules,p=o.node,d=o.isDefine,m=o.isRequire,f=!1,g=o.moduleName,y=o.moduleId,h=o.dependencies,v=(h.length,u.aggressiveOptimizations),b=[],x=[],E=defaultValues.defaultRange,M=defaultValues.defaultLOC,A=o.range||E,I=o.loc||M,O=o.shouldOptimize,j=defaultValues.dependencyBlacklist,w=function(){var e,t,n,r,a=o.moduleReturnValue;if(a&&"FunctionExpression"===a.type&&a.body&&_.isArray(a.body.body)&&a.body.body.length){if(e=_.filter(a.body.body,function(e){return!0===u.removeUseStricts?!utils.isUseStrict(e.expression):e}),a.body.body=e,t=_.filter(e,{type:"ReturnStatement"}),b=_.filter(e,{left:{type:"Identifier",name:"exports"}}),x=_.filter(e,{left:{type:"MemberExpression",object:{type:"Identifier",name:"module"},property:{type:"Identifier",name:"exports"}}}),t.length){if(n=(t=t[0]).argument,r=!1,_.each(a.params,function(e){e=e.name;l.storedModules[e]||j[e]||(r=!0)}),r||!O||!utils.isFunctionExpression(t)&&1<e.length||n&&"Identifier"===n.type)return a;f=!0,(a=n).params&&a.params.length}}else a&&"FunctionExpression"===a.type&&a.body&&_.isArray(a.body.body)&&0===a.body.body.length&&(a={type:"Identifier",name:"undefined",range:A,loc:I},0);return a}(),R=!!(w&&w.body&&_.isArray(w.body.body)&&_.filter(w.body.body,{type:"ReturnStatement"}).length),F=(N=w.params||[],_.filter(N,{name:"exports"}).length),N=(N=w.params||[],_.filter(N,{name:"module"}).length),C={},S=(s=[],_.each(h,function(e){n=normalizeModuleName.call(l,utils.normalizeDependencyName(y,e),y),C[n]=!0,s.push({type:"Identifier",name:n,range:E,loc:M})}),s),T=(a=[],F&&estraverse.traverse(w,{enter:function(e){var t,n;"VariableDeclarator"===e.type&&utils.isRequireExpression(e.init)&&e.id&&e.id.name&&e.init&&e.init.arguments&&e.init.arguments[0]&&e.init.arguments[0].value&&(t=e.id.name,n=normalizeModuleName.call(l,utils.normalizeDependencyName(y,e.init.arguments[0].value,y)),_.includes(c,n)||t!==n||a.push({originalName:n,newName:r(n),range:e.range||E,loc:e.loc||M}))}}),a),V=(t=[],_.each(T,function(e){t.push({type:"Identifier",name:e.newName||e,range:e.range,loc:e.loc})}),t),h=function(){var n,t,r=[],e=_.union(w.params&&w.params.length?w.params:!O&&S&&S.length?S:[],V),a={},o=[];if(w.body){if(estraverse.traverse(w.body,{enter:function(e,t){"FunctionExpression"!=e.type&&"FunctionDeclaration"!=e.type||o.push(e)}}),o.length)for(var s=w.body.range[0];s<w.body.range[1];s++)_.each(o,function(e){(s<e.range[0]||s>=e.range[1])&&(t+=l.options.code[s])});else t=l.options.code.substring(w.body.range[0],w.body.range[1]);/[^\w0-9_]arguments[^\w0-9_]/.test(t)&&(e=e.concat(S.slice(e.length)))}return _.each(e,function(e,t){n=(e||S[t]).name,O||"{}"===n?"{}"===n||F&&"remove"===defaultValues.dependencyBlacklist[n]||(r.push({type:"Identifier",name:n,range:E,loc:M}),f||!0!==v||l.storedModules[n]||!S[t]||(l.callbackParameterMap[S[t].name]?(a=_.filter(l.callbackParameterMap[S[t].name],{name:n})).length?(a=a[0]).count+=1:l.callbackParameterMap[S[t].name].push({name:n,count:1}):l.callbackParameterMap[S[t].name]=[{name:n,count:1}])):r.push({type:"Identifier",name:n,range:E,loc:M})}),i=r,_.filter(r||[],function(e){return!0!==v||!O||!l.storedModules[e.name]})}(),R=!R&&F,D=b.length||x.length,S=_.filter(S||[],function(e,t){t=i[t],e=e.name;return!0!==v||!O||(!t||l.storedModules[t.name]&&t.name===e?!l.storedModules[e]:!l.storedModules[t.name])}),k=(S=_.map(S||[],function(e,t){return j[e.name]&&(e.name="{}"),e})).length;return(e=h.length)<k&&S.splice(e,k-e),R&&D&&w.body.body.push({type:"ReturnStatement",argument:{type:"Identifier",name:"exports",range:E,loc:M},range:E,loc:M}),estraverse.replace(w,{enter:function(e){var t,n;if(utils.isRequireExpression(e))return e.arguments&&e.arguments[0]&&e.arguments[0].value?(t=normalizeModuleName.call(l,utils.normalizeDependencyName(y,e.arguments[0].value,y)),_.includes(c,t)?e:{type:"Identifier",name:(n=_.filter(T,{originalName:t}).length?_.filter(T,{originalName:t})[0].newName:n)||t,range:e.range||E,loc:e.loc||M}):e}}),d?convertToIIFEDeclaration.call(l,{moduleId:y,moduleName:g,dependencyNames:S,callbackFuncParams:h,hasModuleParam:N,hasExportsParam:F,callbackFunc:w,isOptimized:f,node:p}):m?convertToIIFE.call(l,{dependencyNames:S,callbackFuncParams:h,callbackFunc:w,node:p}):void 0},convertToObjectDeclaration=function(e,t){var n,r,a=e.node,o=defaultValues.defaultRange,s=defaultValues.defaultLOC,o=a.range||o,a=a.loc||s,s=e.moduleName;"functionCallExpression"===t&&(r=(t=(n=e.moduleReturnValue).callee).params)&&r.length&&_.isArray(r)&&_.filter(r,{name:"global"})&&_.isObject(t.body)&&_.isArray(t.body.body)&&(r=_.filter(t.body.body,{type:"ReturnStatement"})[0],_.isObject(r)&&_.isObject(r.argument)&&"FunctionExpression"===r.argument.type&&(t=r.argument,_.isObject(t.body)&&_.isArray(t.body.body)&&(r=_.filter(t.body.body,{type:"ReturnStatement"})[0],_.isObject(r.argument)&&_.isObject(r.argument.right)&&_.isObject(r.argument.right.property)&&r.argument.right.property.name&&(n={type:"MemberExpression",computed:!1,object:{type:"Identifier",name:"window",range:o,loc:a},property:{type:"Identifier",name:r.argument.right.property.name,range:o,loc:a},range:o,loc:a})))),n=n||e.moduleReturnValue;return{type:"ExpressionStatement",expression:{type:"AssignmentExpression",operator:"=",left:{type:"Identifier",name:s,range:o,loc:a},right:n,range:o,loc:a},range:o,loc:a}},createAst=function(e){var t=this.options,n=t.filePath,e=e||t.code||(n?utils.readFile(n):""),n=t.esprima,r=t.escodegen;if(e){if(!_.isPlainObject(esprima)||!_.isFunction(esprima.parse))throw new Error(errorMsgs.esprima);e=esprima.parse(e,n);if(t.sourceMap&&sourcemapToAst(e,t.sourceMap),!0===n.comment&&!0===r.comment)try{e=escodegen.attachComments(e,e.comments,e.tokens)}catch(e){}return e}throw new Error(errorMsgs.emptyCode)},convertDefinesAndRequires=function(e,t){var n,r,a,o,s,i,l,u=this,c=u.options,p=utils.isDefine(e),d=utils.isRequire(e),m="",f=defaultValues.defaultRange,g=defaultValues.defaultLOC,y=e.range||f,h=e.loc||g,v=defaultValues.dependencyBlacklist,b=p||d?e.expression.loc.start.line:e&&e.loc&&e.loc.start?e.loc.start.line:null,b=u.matchingCommentLineNumbers[b]||u.matchingCommentLineNumbers[b-1];return utils.isAMDConditional(e)&&(estraverse.traverse(e,{enter:function(e){var t;utils.isDefine(e)&&e.expression&&e.expression.arguments&&e.expression.arguments.length&&"Literal"===e.expression.arguments[0].type&&e.expression.arguments[0].value&&(t=normalizeModuleName.call(u,e.expression.arguments[0].value),!0!==c.transformAMDChecks?u.conditionalModulesToIgnore[t]=!0:u.conditionalModulesToNotOptimize[t]=!0,!0===c.createAnonymousAMDModule&&(u.storedModules[t]=!1,e.expression.arguments.shift()))}}),!b&&!0===c.transformAMDChecks)?(e.test={type:"Literal",value:!0,raw:"true",range:y,loc:h},e):p||d?(s=Array.prototype.slice.call(e.expression.arguments,0),r=d?s[1]:s[s.length-1],a=e.expression.arguments[0].value,n=normalizeModuleName.call(u,a),o=!u.conditionalModulesToNotOptimize[n],s=d?s[0]:s[s.length-2],i=[],s=_.isPlainObject(s)&&s.elements||[],l=_.filter(s,{value:"exports"}).length,_.isArray(s)&&s.length&&_.each(s,function(e){v[e.value]&&!o?i.push(e.value):"remove"!==v[e.value]?"exports"===e.value?(i.push(n),u.exportsModules[n]=!0):v[e.value]?i.push("{}"):i.push(e.value):l||i.push("{}")}),s={node:e,moduleName:n,moduleId:a,dependencies:i,moduleReturnValue:r,isDefine:p,isRequire:d,range:y,loc:h,shouldOptimize:o},p?b||!n||!0===u.conditionalModulesToIgnore[n]?(u.options.ignoreModules.push(n),e):_.includes(c.removeModules,n)?{type:"EmptyStatement"}:(_.isObject(c.shimOverrides)&&c.shimOverrides[a]?(s.moduleReturnValue=createAst.call(u,c.shimOverrides[a]),_.isArray(s.moduleReturnValue.body)&&_.isObject(s.moduleReturnValue.body[0])?_.isObject(s.moduleReturnValue.body[0].expression)&&(s.moduleReturnValue=s.moduleReturnValue.body[0].expression,m="objectExpression"):s.moduleReturnValue=r):s.moduleReturnValue&&"Identifier"===s.moduleReturnValue.type&&(m="functionExpression"),_.includes(c.ignoreModules,n)?e:utils.isFunctionExpression(r)||"functionExpression"===m?convertToFunctionExpression.call(u,s):utils.isObjectExpression(r)||"objectExpression"===m?convertToObjectDeclaration.call(u,s):utils.isFunctionCallExpression(r)?convertToObjectDeclaration.call(u,s,"functionCallExpression"):void 0):d?b?e:(p=!(!_.isArray(e.expression.arguments)||!e.expression.arguments.length)&&(e.expression.arguments[1]&&e.expression.arguments[1].body&&e.expression.arguments[1].body.body&&e.expression.arguments[1].body.body.length),!0!==c.removeAllRequires&&p?convertToFunctionExpression.call(u,s):{type:"EmptyStatement",range:y,loc:h}):void 0):("FunctionExpression"===e.type&&_.isArray(e.params)&&_.filter(e.params,{type:"Identifier",name:"exports"}).length&&_.isObject(e.body)&&_.isArray(e.body.body)&&!_.filter(e.body.body,{type:"ReturnStatement"}).length&&(!(!t||!t.arguments||!(t&&t.arguments&&t.arguments.length))&&_.filter(t.arguments,{type:"FunctionExpression"}).length&&e.body.body.unshift({type:"ExpressionStatement",expression:{type:"AssignmentExpression",operator:"=",left:{type:"Identifier",name:"exports",range:f,loc:g},right:{type:"LogicalExpression",operator:"||",left:{type:"Identifier",name:"exports",range:f,loc:g},right:{type:"ObjectExpression",properties:[],range:f,loc:g},range:f,loc:g},range:f,loc:g},range:f,loc:g}),e.body.body.push({type:"ReturnStatement",argument:{type:"Identifier",name:"exports",range:f,loc:g},range:f,loc:g})),e)},traverseAndUpdateAst=function(e){var a=this,o=a.options,t=e.ast;if(!_.isPlainObject(e))throw new Error(errorMsgs.invalidObject("traverseAndUpdateAst"));if(!t)throw new Error(errorMsgs.emptyAst("traverseAndUpdateAst"));if(_.isPlainObject(estraverse)&&_.isFunction(estraverse.replace))return estraverse.replace(t,{enter:function(e,t){var n,r;return"Program"===e.type?(r=[],a.comments=e.comments,_.each(e.comments,function(e){e.value.trim()===o.commentCleanName&&r.push(e)}),n=r,_.each(n,function(e){currentLineNumber=e.loc.start.line,a.matchingCommentLineNumbers[currentLineNumber]=!0}),e):convertDefinesAndRequires.call(a,e,t)},leave:function(e){return e}}),t;throw new Error(errorMsgs.estraverse)},getNormalizedModuleName=function(e){if(utils.isDefine(e))return e=e.expression.arguments[0].value,normalizeModuleName.call(this,e)},findAndStoreAllModuleIds=function(e){var n=this;if(!e)throw new Error(errorMsgs.emptyAst("findAndStoreAllModuleIds"));if(!_.isPlainObject(estraverse)||!_.isFunction(estraverse.traverse))throw new Error(errorMsgs.estraverse);estraverse.traverse(e,{enter:function(e,t){t=getNormalizedModuleName.call(n,e,t);t&&!n.storedModules[t]&&(n.storedModules[t]=!0),"ReturnStatement"===e.type&&e.argument&&e.argument.callee&&"define"===e.argument.callee.name&&(e.type="ExpressionStatement",e.expression=e.argument,delete e.argument)}})},generateCode=function(e){var t=this.options.escodegen||{};if(_.isPlainObject(escodegen)&&_.isFunction(escodegen.generate))return escodegen.generate(e,t);throw new Error(errorMsgs.escodegen)},clean=function(){var t,n,r,l=this,u=l.options,c=u.ignoreModules,a={},e={},o=[],s={},p=defaultValues.defaultRange,d=defaultValues.defaultLOC,i=createAst.call(l);return findAndStoreAllModuleIds.call(l,i),(a=traverseAndUpdateAst.call(l,{ast:i}))&&_.isArray(a.body)&&estraverse.replace(a,{enter:function(e,n){var t,a,r=e&&e.left&&e.left.name?e.left.name:"",o=e.right,s=_.filter(l.callbackParameterMap[r],function(e){return e&&1<e.count}),i=[];if(void 0!==e&&"EmptyStatement"!==e.type)return utils.isRequireExpression(e)?e.arguments&&e.arguments[0]&&e.arguments[0].value?(t=normalizeModuleName.call(l,e.arguments[0].value),-1===c.indexOf(t)?{type:"Identifier",name:t,range:e.range||p,loc:e.loc||d}:e):e:!0===u.aggressiveOptimizations&&"AssignmentExpression"===e.type&&r&&(a=_.map(o&&o.callee&&o.callee.params?o.callee.params:[],function(e){return e.name}),t=_.map(o.arguments,function(e){return e.name}),_.each(t,function(e){_.each(l.callbackParameterMap[e],function(e){var n=e.name,r=e.count;_.each(a,function(e,t){1<r&&n===e&&i.push(t)})})}),_.each(i,function(e){o.arguments.splice(e,e+1),o.callee.params.splice(e,e+1)}),l.callbackParameterMap[r])?(e.right=!0===u.aggressiveOptimizations&&s.length?(t=_.map(s,function(e,t){return{type:"AssignmentExpression",operator:"=",left:{type:"Identifier",name:e.name,range:p,loc:d},right:t<s.length-1?{range:p,loc:d}:o,range:p,loc:d}}),r=_.reduce(t,function(e,t){return e.right=t,e}),t.length?r:o):o,e):void 0;_.each(n.body,function(e,t){void 0!==e&&"EmptyStatement"!==e.type||n.body.splice(t,1)})}}),_.isArray(u.globalModules)&&_.each(u.globalModules,function(e){_.isString(e)&&e.length&&a.body.push({type:"ExpressionStatement",expression:{type:"AssignmentExpression",operator:"=",left:{type:"MemberExpression",computed:!1,object:{type:"Identifier",name:"window",range:p,loc:d},property:{type:"Identifier",name:e,range:p,loc:d},range:p,loc:d},right:{type:"Identifier",name:e,range:p,loc:d},range:p,loc:d},range:p,loc:d})}),n={},i=l.callbackParameterMap,_.each(i,function(e){_.each(e,function(e){1<e.count&&(t=e.name,n[t]=!0)})}),s=n,i=_.merge(_.cloneDeep(_.reduce(l.storedModules,function(e,t,n){return!1!==t&&(e[n]=!0),e},{})),s),_.each(i,function(e,t){var n;_.includes(u.ignoreModules,t)||(n=!0!==l.exportsModules[t]?null:{type:"ObjectExpression",properties:[]},o.push({type:"VariableDeclarator",id:{type:"Identifier",name:t,range:p,loc:d},init:n,range:p,loc:d}))}),_.isObject(u.config)&&!_.isEmpty(u.config)&&(r=[],_.each(u.config,function(e,t){var n=u.config[t];r.push({type:"Property",key:{type:"Literal",value:t},value:{type:"ObjectExpression",properties:[{type:"Property",key:{type:"Literal",value:"config"},value:{type:"FunctionExpression",id:null,params:[],defaults:[],body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:createAst.call(l,"var x ="+JSON.stringify(n)).body[0].declarations[0].init}]}},kind:"init"}]}})}),e={type:"VariableDeclarator",id:{type:"Identifier",name:"modules"},init:{type:"ObjectExpression",properties:r}},o.push(e)),o.length&&a.body.unshift({type:"VariableDeclaration",declarations:o,kind:"var",range:p,loc:d}),s=generateCode.call(l,a),_.isObject(u.wrap)&&(_.isString(u.wrap.start)&&u.wrap.start.length&&(s=u.wrap.start+s),_.isString(u.wrap.end)&&u.wrap.end.length&&(s+=u.wrap.end)),s};!function(){!function(o,s){"use strict";"function"==typeof define&&define.amd?(s.amd=!0,define(["esprima","estraverse","escodegen","underscore","sourcemap-to-ast"],function(e,t,n,r,a){return s({esprima:e,estraverse:t,escodegen:n,underscore:r,sourcemapToAst:a},o)})):"undefined"!=typeof exports?(s.commonjs=!0,module.exports=s(null,o)):o.amdclean=s(null,o)}(this,function e(t,n){"use strict";sourcemapToAst=e.amd&&t&&t.sourcemapToAst?t.sourcemapToAst:e.commonjs?require("sourcemap-to-ast"):n&&n.sourcemapToAst?n.sourcemapToAst:void 0,esprima=e.amd&&t&&t.esprima&&t.esprima.parse?t.esprima:e.commonjs?require("esprima"):n&&n.esprima&&n.esprima.parse?n.esprima:void 0,estraverse=e.amd&&t&&t.estraverse&&t.estraverse.traverse?t.estraverse:e.commonjs?require("estraverse"):n&&n.estraverse&&n.estraverse.traverse?n.estraverse:void 0,escodegen=e.amd&&t&&t.escodegen&&t.escodegen.generate?t.escodegen:e.commonjs?require("escodegen"):n&&n.escodegen&&n.escodegen.generate?n.escodegen:void 0,_=e.amd&&t&&(t.underscore||t.lodash||t._)?t.underscore||t.lodash||t._:e.commonjs?require("lodash"):n&&n._?n._:void 0;function r(e,t){if(!esprima)throw new Error(errorMsgs.esprima);if(!estraverse)throw new Error(errorMsgs.estraverse);if(!escodegen)throw new Error(errorMsgs.escodegen);if(!_)throw new Error(errorMsgs.lodash);if(!sourcemapToAst&&"undefined"==typeof window)throw new Error(errorMsgs.sourcemapToAst);var n=_.cloneDeep(this.defaultOptions||{}),r=e||t||{};!_.isPlainObject(e)&&_.isString(e)&&(r=_.merge({code:e},_.isObject(t)?t:{})),this.storedModules={},this.originalAst={},this.callbackParameterMap={},this.conditionalModulesToIgnore={},this.conditionalModulesToNotOptimize={},this.matchingCommentLineNumbers={},this.comments=[],this.exportsModules={},this.options=_.merge(n,r)}t={VERSION:"2.7.0",clean:function(e,t){return new r(e,t).clean()}};return r.prototype={clean:clean,defaultOptions:defaultOptions},t})}()}("undefined"!=typeof esprima?esprima:null,"undefined"!=typeof estraverse?estraverse:null,"undefined"!=typeof escodegen?escodegen:null,"undefined"!=typeof _?_:null,"undefined"!=typeof sourcemapToAst?sourcemapToAst:null);